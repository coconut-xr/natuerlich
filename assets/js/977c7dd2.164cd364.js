"use strict";(self.webpackChunknatuerlich_docs=self.webpackChunknatuerlich_docs||[]).push([[146],{2382:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>l,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var o=t(7462),r=(t(7294),t(3905)),a=(t(5851),t(5714));const i={},s="Anchors",c={unversionedId:"anchors",id:"anchors",title:"Anchors",description:"natuerlich supports WebXR Anchors Module with the useAnchor and usePersistedAnchor hooks. Both hooks return a tuple containing the anchor and a createAnchor function. If no anchor is present, the returned anchor is undefined. A new anchor is created once the createAnchor function is called. If the process is successful, the returned anchor will contain an XRAnchor.",source:"@site/docs/anchors.md",sourceDirName:".",slug:"/anchors",permalink:"/natuerlich/anchors",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"mainSidebar",previous:{title:"How to use natuerlich",permalink:"/natuerlich/category/how-to-use-natuerlich"},next:{title:"Configuration",permalink:"/natuerlich/configuration"}},p={},h=[],u={toc:h},d="wrapper";function l(e){let{components:n,...t}=e;return(0,r.kt)(d,(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"anchors"},"Anchors"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"natuerlich")," supports ",(0,r.kt)("a",{parentName:"p",href:"https://immersive-web.github.io/anchors/"},"WebXR Anchors Module")," with the ",(0,r.kt)("inlineCode",{parentName:"p"},"useAnchor")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"usePersistedAnchor")," hooks. Both hooks return a tuple containing the ",(0,r.kt)("inlineCode",{parentName:"p"},"anchor")," and a ",(0,r.kt)("inlineCode",{parentName:"p"},"createAnchor")," function. If no anchor is present, the returned ",(0,r.kt)("inlineCode",{parentName:"p"},"anchor")," is undefined. A new anchor is created once the ",(0,r.kt)("inlineCode",{parentName:"p"},"createAnchor")," function is called. If the process is successful, the returned ",(0,r.kt)("inlineCode",{parentName:"p"},"anchor")," will contain an ",(0,r.kt)("inlineCode",{parentName:"p"},"XRAnchor"),"."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"XRAnchor")," contains the ",(0,r.kt)("inlineCode",{parentName:"p"},"anchorSpace")," property. The ",(0,r.kt)("inlineCode",{parentName:"p"},"anchorSpace")," property can be used to display content at the position of the anchor using the ",(0,r.kt)("inlineCode",{parentName:"p"},"SpaceGroup")," component. The ",(0,r.kt)("inlineCode",{parentName:"p"},"SpaceGroup")," component takes the ",(0,r.kt)("inlineCode",{parentName:"p"},"space")," property and renders all its children at the origin of the provided space."),(0,r.kt)("p",null,"In the following example, we create a box that can be positioned by pinching anywhere in the scene. Once the user pinches, the anchor and the box is set to that position. The anchor is persisted even when restarting the immersive experience."),(0,r.kt)("admonition",{title:"Important",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"SpaceGroup")," component must be placed inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"ImmersiveSessionOrigin")," if a ",(0,r.kt)("inlineCode",{parentName:"p"},"ImmersiveSessionOrigin")," is present. Furthermore, the ",(0,r.kt)("inlineCode",{parentName:"p"},'"anchors"')," feature must be added to the ",(0,r.kt)("inlineCode",{parentName:"p"},"sessionOptions")," for the ",(0,r.kt)("a",{parentName:"p",href:"https://immersive-web.github.io/anchors/"},"WebXR Anchors Module")," to be active if supported by the device.")),(0,r.kt)(a.w,{path:"natuerlich-anchors-8wls7l",mdxType:"CodesandboxEmbed"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import {\n  XRCanvas,\n  Controllers,\n  Hands\n} from "@coconut-xr/natuerlich/defaults";\nimport {\n  useEnterXR,\n  NonImmersiveCamera,\n  ImmersiveSessionOrigin,\n  SpaceGroup,\n  usePersistedAnchor\n} from "@coconut-xr/natuerlich/react";\nimport { Quaternion } from "three";\n\nconst sessionOptions: XRSessionInit = {\n  requiredFeatures: ["local-floor", "anchors"]\n};\n\nexport default function Index() {\n  const [anchor, createAnchor] = usePersistedAnchor("test-anchor");\n  const enterAR = useEnterXR("immersive-ar", sessionOptions);\n  return (\n    <div\n      style={{...}}\n    >\n      <button onClick={enterAR}>Enter AR</button>\n      <XRCanvas>\n        <NonImmersiveCamera position={[0, 1.5, 4]} />\n        <ImmersiveSessionOrigin position={[0, 0, 4]}>\n          {anchor != null && (\n            <SpaceGroup space={anchor.anchorSpace}>\n              <mesh scale={0.1}>\n                <boxGeometry />\n                <meshBasicMaterial color="red" />\n              </mesh>\n            </SpaceGroup>\n          )}\n          <Hands type="grab"\n            onPointerDownMissed={(e) => createAnchor(e.point, new Quaternion())}\n          />\n          <Controllers type="grab"\n            onPointerDownMissed={(e) => createAnchor(e.point, new Quaternion())}\n          />\n        </ImmersiveSessionOrigin>\n      </XRCanvas>\n    </div>\n  );\n}\n')),(0,r.kt)("hr",null),(0,r.kt)("admonition",{title:"Question not answered?",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If your questions were not yet answered, visit our ",(0,r.kt)("a",{parentName:"p",href:"https://discord.gg/NCYM8ujndE"},"Discord")," \ud83d\ude09")))}l.isMDXComponent=!0}}]);